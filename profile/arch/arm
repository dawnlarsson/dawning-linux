#> compiler aarch64-linux-gnu-gcc

#> kernel_image linux/arch/arm64/boot/Image
#> kernel_export dist/kernel8.img

#> arch arm64
#> make_flags ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu-
#> virt qemu-system-aarch64

# Architecture selection
CONFIG_64BIT=y
CONFIG_ARM=y
CONFIG_ARM64=y
CONFIG_ARCH_MULTI_V7=y
CONFIG_ARCH_MULTI_V8_2=y
CONFIG_ARCH_BCM=y
CONFIG_ARCH_BCM2835=y
CONFIG_ARCH_BCMSTB=y

# ARM specific options
CONFIG_ARM64_VA_BITS_48=y
CONFIG_ARM64_PTR_AUTH=y
CONFIG_ARM64_EPAN=y
CONFIG_ARM64_BTI=y
CONFIG_ARM64_MTE=y
CONFIG_ARM64_SVE=y
CONFIG_ARM64_PMEM=y
CONFIG_ARM64_CNP=y
CONFIG_ARM64_UAO=y
CONFIG_ARM64_LSE=y
CONFIG_ARM64_VHE=y
CONFIG_ARM64_PAN=y
CONFIG_ARM64_DEBUG_PRIORITY_MASKING=y

# Memory management
CONFIG_HIGHMEM=y
CONFIG_VMALLOC_SIZE=512

# Device Tree support
CONFIG_OF=y
CONFIG_OF_FLATTREE=y
CONFIG_OF_EARLY_FLATTREE=y
CONFIG_OF_ADDRESS=y
CONFIG_OF_IRQ=y
CONFIG_OF_NET=y
CONFIG_OF_MDIO=y
CONFIG_OF_RESERVED_MEM=y
CONFIG_OF_DYNAMIC=y
CONFIG_OF_OVERLAY=y

# Clock support
CONFIG_COMMON_CLK=y
CONFIG_COMMON_CLK_FIXED_MMIO=y

# USB support
CONFIG_USB=y
CONFIG_USB_ANNOUNCE_NEW_DEVICES=y
CONFIG_USB_OTG=y
CONFIG_USB_MON=y
CONFIG_USB_XHCI_HCD=y
CONFIG_USB_XHCI_PLATFORM=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_EHCI_HCD_PLATFORM=y
CONFIG_USB_OHCI_HCD=y
CONFIG_USB_OHCI_HCD_PLATFORM=y
CONFIG_USB_DWC2=y
CONFIG_USB_GADGET=y
CONFIG_USB_CONFIGFS=y
CONFIG_USB_CONFIGFS_SERIAL=y
CONFIG_USB_CONFIGFS_ACM=y
CONFIG_USB_CONFIGFS_OBEX=y
CONFIG_USB_CONFIGFS_NCM=y
CONFIG_USB_CONFIGFS_ECM=y
CONFIG_USB_CONFIGFS_ECM_SUBSET=y
CONFIG_USB_CONFIGFS_RNDIS=y
CONFIG_USB_CONFIGFS_EEM=y
CONFIG_USB_CONFIGFS_MASS_STORAGE=y
CONFIG_USB_CONFIGFS_F_FS=y

# Network support
CONFIG_ETHERNET=y
CONFIG_NETDEVICES=y
CONFIG_NET_VENDOR_BROADCOM=y
CONFIG_BCMGENET=y
CONFIG_PHY_BROADCOM=y

# Display support
CONFIG_FB=y
CONFIG_FB_BCM2708=y
CONFIG_FB_SIMPLE=y
CONFIG_DRM=y
CONFIG_DRM_V3D=y
CONFIG_DRM_VC4=y
CONFIG_DRM_VC4_HDMI_CEC=y
CONFIG_DRM_VC4_HDMI_HDCP=y
CONFIG_DRM_VC4_HDMI_HDMI=y
CONFIG_DRM_VC4_HDMI_HDMI0_HDCP=y
CONFIG_BACKLIGHT_CLASS_DEVICE=y
CONFIG_BACKLIGHT_PWM=y

# Hardware monitoring
CONFIG_HWMON=y
CONFIG_THERMAL=y
CONFIG_THERMAL_GOV_FAIR_SHARE=y
CONFIG_THERMAL_GOV_BANG_BANG=y
CONFIG_THERMAL_GOV_STEP_WISE=y
CONFIG_THERMAL_GOV_USER_SPACE=y
CONFIG_BCM2835_THERMAL=y
CONFIG_WATCHDOG=y

# Power management
CONFIG_PM_SLEEP=y
CONFIG_PM_RUNTIME=y
CONFIG_SUSPEND=y
CONFIG_PM_CLK=y
CONFIG_PM_GENERIC_DOMAINS=y
CONFIG_RASPBERRYPI_POWER=y

# CPU Frequency scaling
CONFIG_CPU_FREQ=y
CONFIG_CPU_FREQ_STAT=y
CONFIG_CPU_FREQ_DEFAULT_GOV_ONDEMAND=y
CONFIG_CPU_FREQ_GOV_PERFORMANCE=y
CONFIG_CPU_FREQ_GOV_USERSPACE=y
CONFIG_CPU_FREQ_GOV_ONDEMAND=y
CONFIG_CPU_FREQ_GOV_CONSERVATIVE=y
CONFIG_CPU_FREQ_GOV_SCHEDUTIL=y

CONFIG_HW_RANDOM_BCM2835=y